# –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π –∏ –¥–æ—Å—Ç—É–ø–∞

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –¥–æ—Å—Ç—É–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∫ —Ä–∞–∑–ª–∏—á–Ω—ã–º —Ä–∞–∑–¥–µ–ª–∞–º –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∏—Ö —Ä–æ–ª–∏.

## –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### üëë –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä (admin)
**–î–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ä–∞–∑–¥–µ–ª–∞–º:**
- Dashboard
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- –û—Ç–¥–µ–ª—ã
- –ß–∞—Ç—ã
- –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- –î–æ–ª–∂–Ω–æ—Å—Ç–∏
- –ö–ª–∏–µ–Ω—Ç—ã
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏
- –ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä

### üë®‚Äçüíº –ú–µ–Ω–µ–¥–∂–µ—Ä (manager)
**–î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –∫:**
- –ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä
- –ö–ª–∏–µ–Ω—Ç—ã

### üë∑ –°–æ—Ç—Ä—É–¥–Ω–∏–∫ (employee)
**–î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –∫:**
- –ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä
- –ö–ª–∏–µ–Ω—Ç—ã

## –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ä–æ–ª–µ–π

### –ß–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É Artisan

```bash
# –ù–∞–∑–Ω–∞—á–∏—Ç—å —Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
php artisan user:assign-role user@example.com admin

# –ù–∞–∑–Ω–∞—á–∏—Ç—å —Ä–æ–ª—å –º–µ–Ω–µ–¥–∂–µ—Ä–∞
php artisan user:assign-role user@example.com manager

# –ù–∞–∑–Ω–∞—á–∏—Ç—å —Ä–æ–ª—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
php artisan user:assign-role user@example.com employee
```

### –ß–µ—Ä–µ–∑ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

```sql
-- –ù–∞–∑–Ω–∞—á–∏—Ç—å —Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
UPDATE users SET role = 'admin' WHERE email = 'user@example.com';

-- –ù–∞–∑–Ω–∞—á–∏—Ç—å —Ä–æ–ª—å –º–µ–Ω–µ–¥–∂–µ—Ä–∞
UPDATE users SET role = 'manager' WHERE email = 'user@example.com';

-- –ù–∞–∑–Ω–∞—á–∏—Ç—å —Ä–æ–ª—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
UPDATE users SET role = 'employee' WHERE email = 'user@example.com';
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `users`
- `role` - —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (admin, manager, employee)

### –¢–∞–±–ª–∏—Ü–∞ `roles`
- `name` - –Ω–∞–∑–≤–∞–Ω–∏–µ —Ä–æ–ª–∏
- `display_name` - –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ
- `description` - –æ–ø–∏—Å–∞–Ω–∏–µ —Ä–æ–ª–∏
- `slug` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- `organization_id` - ID –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

## Middleware

### CheckPermission
–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É —Ä–∞–∑–¥–µ–ª—É.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –º–∞—Ä—à—Ä—É—Ç–∞—Ö:**
```php
Route::middleware(['permission:users'])->group(function () {
    // –ú–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
});
```

**–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è:**
- `dashboard` - –¥–æ—Å—Ç—É–ø –∫ –¥–∞—à–±–æ—Ä–¥—É
- `users` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- `departments` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–¥–µ–ª–∞–º–∏
- `chats` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–∞—Ç–∞–º–∏
- `organizations` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è–º–∏
- `positions` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ—Å—Ç—è–º–∏
- `clients` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞–º–∏
- `settings` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã
- `messenger` - –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä

## –ù–∞–≤–∏–≥–∞—Ü–∏—è

–ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–æ–µ –º–µ–Ω—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–µ —Ä–∞–∑–¥–µ–ª—ã, –∫ –∫–æ—Ç–æ—Ä—ã–º —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø.

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
–ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤—Å–µ —Ä–∞–∑–¥–µ–ª—ã.

### –î–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
–ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ:
- –ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä
- –ö–ª–∏–µ–Ω—Ç—ã

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö
```php
// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–∏
if (auth()->user()->isAdmin()) {
    // –î–µ–π—Å—Ç–≤–∏—è —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
if (auth()->user()->hasPermission('users')) {
    // –î–µ–π—Å—Ç–≤–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –≤ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è—Ö
```blade
@if(auth()->user()->hasPermission('users'))
    <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –¥–æ—Å—Ç—É–ø–æ–º -->
@endif
```

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –∑–∞–ø—Ä–µ—â–µ–Ω–Ω—ã–º —Ä–∞–∑–¥–µ–ª–∞–º –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤:
- `storage/logs/laravel.log`
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ä–æ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é - `employee`.

## –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–æ–ª–µ–π

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π —Ä–æ–ª–∏
1. –î–æ–±–∞–≤–∏—Ç—å —Ä–æ–ª—å –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
2. –û–±–Ω–æ–≤–∏—Ç—å –º–∞—Å—Å–∏–≤ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π –≤ –º–æ–¥–µ–ª–∏ `User`
3. –û–±–Ω–æ–≤–∏—Ç—å middleware `CheckPermission`

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
1. –û–±–Ω–æ–≤–∏—Ç—å –º–∞—Å—Å–∏–≤ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π –≤ –º–æ–¥–µ–ª–∏ `User`
2. –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏—é –≤ `sidebar.blade.php`

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è-–º–µ–Ω–µ–¥–∂–µ—Ä–∞
```bash
# 1. –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –∏–ª–∏ –º–∏–≥—Ä–∞—Ü–∏—é
# 2. –ù–∞–∑–Ω–∞—á–∏—Ç—å —Ä–æ–ª—å –º–µ–Ω–µ–¥–∂–µ—Ä–∞
php artisan user:assign-role manager@company.com manager
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –≤ –∫–æ–¥–µ
```php
public function index()
{
    $user = auth()->user();
    
    if ($user->isAdmin()) {
        // –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ
        $data = Model::all();
    } else {
        // –ü–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        $data = Model::where('user_id', $user->id)->get();
    }
    
    return view('index', compact('data'));
}
```

### –£—Å–ª–æ–≤–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è—Ö
```blade
@if(auth()->user()->hasPermission('settings'))
    <a href="{{ route('admin.settings.index') }}" class="btn btn-primary">
        –ù–∞—Å—Ç—Ä–æ–π–∫–∏
    </a>
@endif
```

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤–∏–¥–∏—Ç –Ω—É–∂–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: `php artisan tinker` ‚Üí `User::find(1)->role`
2. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ä–æ–ª—å –∏–º–µ–µ—Ç –Ω—É–∂–Ω—ã–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏—é –≤ `sidebar.blade.php`

### –û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–∞–∑–¥–µ–ª—É
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å middleware –≤ –º–∞—Ä—à—Ä—É—Ç–∞—Ö
2. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç –Ω—É–∂–Ω–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –≤ `storage/logs/laravel.log`

### –ü—Ä–æ–±–ª–µ–º—ã —Å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ–º —Ä–æ–ª–µ–π
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –£–±–µ–¥–∏—Ç—å—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞–∑–≤–∞–Ω–∏—è —Ä–æ–ª–∏
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã `users`
